package com.stefankendall.QuickAttack.data;

import com.google.common.collect.ImmutableMap;
import com.google.common.collect.Lists;
import com.google.common.collect.Maps;

import java.math.BigDecimal;
import java.util.List;
import java.util.Map;

public class TypeCalculator {
    Map<String, Map<String, BigDecimal>> typeChart;

    public Map<String, BigDecimal> effectivenessAgainst(List<String> types) {
        Map<String, BigDecimal> effectiveness = Maps.newHashMap();
        for (String attackingType : this.typeChart.keySet()) {
            BigDecimal typeValue = new BigDecimal(1);

            for (String defendingType : types) {
                typeValue = typeValue.multiply(this.typeChart.get(attackingType).get(defendingType));
            }

            effectiveness.put(attackingType, typeValue);
        }
        return effectiveness;
    }

    public List<String> superEffectiveTypes(List<String> defensiveTypes) {
        Map<String, BigDecimal> effectiveness = this.effectivenessAgainst(defensiveTypes);
        List<String> types = Lists.newArrayList();

        for (Map.Entry<String, BigDecimal> typeEffectiveness : effectiveness.entrySet()) {
            if (typeEffectiveness.getValue().compareTo(BigDecimal.ONE) > 0) {
                types.add(typeEffectiveness.getKey());
            }
        }
        return types;
    }

    public List<String> notEffectiveTypes(List<String> defensiveTypes) {
        Map<String, BigDecimal> effectiveness = this.effectivenessAgainst(defensiveTypes);
        List<String> types = Lists.newArrayList();

        for (Map.Entry<String, BigDecimal> typeEffectiveness : effectiveness.entrySet()) {
            if (typeEffectiveness.getValue().compareTo(BigDecimal.ONE) < 0
                    && typeEffectiveness.getValue().compareTo(BigDecimal.ZERO) != 0) {
                types.add(typeEffectiveness.getKey());
            }
        }
        return types;
    }

    public List<String> immuneTypes(List<String> defensiveTypes) {
        Map<String, BigDecimal> effectiveness = this.effectivenessAgainst(defensiveTypes);
        List<String> types = Lists.newArrayList();

        for (Map.Entry<String, BigDecimal> typeEffectiveness : effectiveness.entrySet()) {
            if (typeEffectiveness.getValue().compareTo(BigDecimal.ZERO) == 0) {
                types.add(typeEffectiveness.getKey());
            }
        }
        return types;
    }

    public TypeCalculator() {
        this.typeChart = ImmutableMap.<String, Map<String, BigDecimal>>builder()
                .put("normal", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("0.5"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("0"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("fighting", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("2"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("0.5"))
                                .put("poison", new BigDecimal("0.5"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("2"))
                                .put("bug", new BigDecimal("0.5"))
                                .put("ghost", new BigDecimal("0"))
                                .put("steel", new BigDecimal("2"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("0.5"))
                                .put("ice", new BigDecimal("2"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("2"))
                                .put("fairy", new BigDecimal("0.5")).build()
                )
                .put("flying", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("2"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("0.5"))
                                .put("bug", new BigDecimal("2"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("2"))
                                .put("electric", new BigDecimal("0.5"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("poison", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("0.5"))
                                .put("ground", new BigDecimal("0.5"))
                                .put("rock", new BigDecimal("0.5"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("0.5"))
                                .put("steel", new BigDecimal("0"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("2"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("2")).build()
                )
                .put("ground", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("0"))
                                .put("poison", new BigDecimal("2"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("2"))
                                .put("bug", new BigDecimal("0.5"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("2"))
                                .put("fire", new BigDecimal("2"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("0.5"))
                                .put("electric", new BigDecimal("2"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("rock", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("0.5"))
                                .put("flying", new BigDecimal("2"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("0.5"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("2"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("2"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("2"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("bug", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("0.5"))
                                .put("flying", new BigDecimal("0.5"))
                                .put("poison", new BigDecimal("0.5"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("0.5"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("0.5"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("2"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("2"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("2"))
                                .put("fairy", new BigDecimal("0.5")).build()
                )
                .put("ghost", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("0"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("2"))
                                .put("steel", new BigDecimal("1"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("2"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("0.5"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("steel", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("2"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("0.5"))
                                .put("water", new BigDecimal("0.5"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("0.5"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("2"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("2")).build()
                )
                .put("fire", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("0.5"))
                                .put("bug", new BigDecimal("2"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("2"))
                                .put("fire", new BigDecimal("0.5"))
                                .put("water", new BigDecimal("0.5"))
                                .put("grass", new BigDecimal("2"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("2"))
                                .put("dragon", new BigDecimal("0.5"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("water", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("2"))
                                .put("rock", new BigDecimal("2"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("1"))
                                .put("fire", new BigDecimal("2"))
                                .put("water", new BigDecimal("0.5"))
                                .put("grass", new BigDecimal("0.5"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("0.5"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("grass", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("0.5"))
                                .put("poison", new BigDecimal("0.5"))
                                .put("ground", new BigDecimal("2"))
                                .put("rock", new BigDecimal("2"))
                                .put("bug", new BigDecimal("0.5"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("0.5"))
                                .put("water", new BigDecimal("2"))
                                .put("grass", new BigDecimal("0.5"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("0.5"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("electric", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("2"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("0"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("1"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("2"))
                                .put("grass", new BigDecimal("0.5"))
                                .put("electric", new BigDecimal("0.5"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("0.5"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("psychic", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("2"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("2"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("0.5"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("0"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("ice", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("2"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("2"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("0.5"))
                                .put("water", new BigDecimal("0.5"))
                                .put("grass", new BigDecimal("2"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("0.5"))
                                .put("dragon", new BigDecimal("2"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("1")).build()
                )
                .put("dragon", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("1"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("2"))
                                .put("dark", new BigDecimal("1"))
                                .put("fairy", new BigDecimal("0")).build()
                )
                .put("dark", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("0.5"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("1"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("2"))
                                .put("steel", new BigDecimal("1"))
                                .put("fire", new BigDecimal("1"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("2"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("1"))
                                .put("dark", new BigDecimal("0.5"))
                                .put("fairy", new BigDecimal("0.5")).build()
                )
                .put("fairy", ImmutableMap.<String, BigDecimal>builder()
                                .put("normal", new BigDecimal("1"))
                                .put("fighting", new BigDecimal("2"))
                                .put("flying", new BigDecimal("1"))
                                .put("poison", new BigDecimal("0.5"))
                                .put("ground", new BigDecimal("1"))
                                .put("rock", new BigDecimal("1"))
                                .put("bug", new BigDecimal("1"))
                                .put("ghost", new BigDecimal("1"))
                                .put("steel", new BigDecimal("0.5"))
                                .put("fire", new BigDecimal("0.5"))
                                .put("water", new BigDecimal("1"))
                                .put("grass", new BigDecimal("1"))
                                .put("electric", new BigDecimal("1"))
                                .put("psychic", new BigDecimal("1"))
                                .put("ice", new BigDecimal("1"))
                                .put("dragon", new BigDecimal("2"))
                                .put("dark", new BigDecimal("2"))
                                .put("fairy", new BigDecimal("1")).build()
                ).build();
    }
}
